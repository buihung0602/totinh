<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Th∆∞ T·ªè T√¨nh</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --accent:#ff6b81;
      --accent-2:#ffd166;
      --text:#e6eef8;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background: radial-gradient( circle at 10% 10%, rgba(255,107,129,0.06), transparent 10%), radial-gradient( circle at 90% 90%, rgba(255,209,102,0.03), transparent 10%), var(--bg); color:var(--text)}

    .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:28px}
    .card{width:100%;max-width:760px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));border:1px solid rgba(255,255,255,0.04);padding:28px;border-radius:16px;box-shadow:0 8px 30px rgba(2,6,23,0.6);position:relative;overflow:hidden}

    header{display:flex;align-items:center;gap:16px}
    .logo{width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:700;color:#111;transform:rotate(-12deg);box-shadow:0 6px 18px rgba(255,107,129,0.12)}
    h1{font-size:20px;margin:0}
    p.lead{margin:6px 0 0;color:rgba(230,238,248,0.8)}

    .scene{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:18px}
    @media (max-width:840px){.scene{grid-template-columns:1fr;}.aside{order:2}}

    .letter{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.04));padding:22px;border-radius:12px;min-height:260px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}
    .letter .heart{font-size:54px;margin-bottom:12px;transform:scale(1);transition:transform .3s}
    .letter h2{margin:6px 0 6px}
    .letter p{margin:0 0 14px;color:rgba(230,238,248,0.85)}

    .cta{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
    .btn{padding:10px 16px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn-primary{background:linear-gradient(90deg,var(--accent),#ff8aa0);color:#111}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}

    .aside{padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03));display:flex;flex-direction:column;gap:14px}
    .q{padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);text-align:center}
    .answer{display:flex;gap:8px;justify-content:center}

    /* modal */
    .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.5);opacity:0;pointer-events:none;transition:opacity .25s}
    .modal.open{opacity:1;pointer-events:auto}
    .modal-card{background:var(--card);padding:22px;border-radius:12px;max-width:520px;width:100%;box-shadow:0 18px 50px rgba(2,6,23,0.6);text-align:center}
    .modal-card h3{margin:0 0 8px}

    .confetti-canvas{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none}

    footer{margin-top:16px;text-align:center;color:rgba(230,238,248,0.6);font-size:13px}

    /* small touches */
    .sparkle{position:absolute;right:-60px;top:-60px;width:180px;height:180px;border-radius:50%;background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.06), transparent 12%);filter:blur(8px)}

  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main">
      <canvas class="confetti-canvas" id="confetti"></canvas>
      <div class="sparkle"></div>
      <header>
        <div class="logo">‚ô•</div>
        <div>
          <h1>Th∆∞ T·ªè T√¨nh</h1>
          <p class="lead">M·ªôt trang nh·ªè ƒë·ªÉ n√≥i l·ªùi th·∫≠t l√≤ng ‚Äî g·ª≠i ƒë·∫øn ng∆∞·ªùi b·∫°n th∆∞∆°ng.</p>
        </div>
      </header>

      <div class="scene">
        <div class="letter" id="letter">
          <div class="heart" id="heart">üíå</div>
          <h2 id="title">G·ª≠i em ‚Äî ng∆∞·ªùi l√†m anh c∆∞·ªùi nhi·ªÅu nh·∫•t</h2>
          <p id="preview">Anh mu·ªën n√≥i v·ªõi em r·∫•t nhi·ªÅu ƒëi·ªÅu, nh∆∞ng t√≥m g·ªçn l·∫°i: anh th√≠ch em. N·∫øu em ƒë·ªìng √Ω, b·∫•m n√∫t 'ƒê·ªìng √Ω' nh√© üíñ</p>
          <div class="cta">
            <button class="btn btn-primary" id="openBtn">M·ªü Th∆∞</button>
            <button class="btn btn-ghost" id="surpriseBtn">G·ª≠i Qu√† ·∫¢o</button>
          </div>
        </div>

        <aside class="aside">
          <div class="q">
            <strong>Em c√≥ th√≠ch anh kh√¥ng?</strong>
            <div class="answer" style="margin-top:10px">
              <button class="btn btn-primary" id="yesBtn">C√≥ (ƒê·ªìng √Ω)</button>
              <button class="btn btn-ghost" id="noBtn">Kh√¥ng (T·ª´ ch·ªëi)</button>
            </div>
          </div>

          <div class="q" id="secretBox">
            <strong>Ghi l·ªùi nh·∫Øn c·ªßa anh</strong>
            <textarea id="note" rows="3" style="width:100%;margin-top:8px;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)"></textarea>
            <button class="btn btn-primary" id="sendNote" style="margin-top:8px;display:block;margin-left:auto">G·ª≠i</button>
          </div>

          <div style="text-align:center;color:rgba(230,238,248,0.7)">B·∫°n c√≥ th·ªÉ tu·ª≥ ch·ªânh l·ªùi nh·∫Øn v√† g·ª≠i th·ª≠ nh√©.</div>
        </aside>
      </div>

      <footer>Nh·∫•n "M·ªü Th∆∞" ƒë·ªÉ xem n·ªôi dung t·ªè t√¨nh ƒë·∫ßy ƒë·ªß. ƒê·ª´ng lo ‚Äî m·ªçi th·ª© an to√†n v√† ch·ªâ c√≥ gi·ªØa b·∫°n v√† trang n√†y.</footer>
    </div>
  </div>

  <!-- modal -->
  <div class="modal" id="modal">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Anh mu·ªën n√≥i v·ªõi em...</h3>
      <p id="modalText">...</p>
      <div style="margin-top:16px;display:flex;gap:8px;justify-content:center">
        <button class="btn btn-primary" id="accept">ƒê·ªìng √Ω üíñ</button>
        <button class="btn btn-ghost" id="decline">H·∫πn nh√©</button>
      </div>
    </div>
  </div>

  <script>
    // DOM
    const openBtn = document.getElementById('openBtn');
    const modal = document.getElementById('modal');
    const modalText = document.getElementById('modalText');
    const accept = document.getElementById('accept');
    const decline = document.getElementById('decline');
    const heart = document.getElementById('heart');
    const confettiCanvas = document.getElementById('confetti');
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const surpriseBtn = document.getElementById('surpriseBtn');
    const noteInput = document.getElementById('note');
    const sendNote = document.getElementById('sendNote');

    // Pre-written letter (you can edit)
    const fullLetter = `Em √†,

    Anh ƒë√£ suy nghƒ© r·∫•t nhi·ªÅu tr∆∞·ªõc khi vi·∫øt nh·ªØng d√≤ng n√†y. M·ªói khi nghƒ© v·ªÅ em, tim anh l·∫°i nh·∫π v√† n·ªü m·ªôt n·ª• c∆∞·ªùi. Em l√† ng∆∞·ªùi khi·∫øn nh·ªØng ng√†y th∆∞·ªùng c·ªßa anh tr·ªü n√™n ƒë√°ng y√™u h∆°n, l√† ng∆∞·ªùi anh mu·ªën chia s·∫ª m·ªçi ƒëi·ªÅu ‚Äî t·ª´ nh·ªØng th·ª© b√© nh·ªè ƒë·∫øn nh·ªØng ∆∞·ªõc m∆° l·ªõn.

    Anh th√≠ch em ‚Äî th√≠ch c√°ch em c∆∞·ªùi, c√°ch em n√≥i, v√† c·∫£ nh·ªØng l√∫c em l·∫ßm l·ª°. N·∫øu em cho ph√©p, anh mu·ªën ƒë∆∞·ª£c ·ªü b√™n c·∫°nh em, c√πng em b∆∞·ªõc qua nh·ªØng ng√†y vui bu·ªìn.

    D√π c√¢u tr·∫£ l·ªùi c·ªßa em l√† g√¨, anh v·∫´n tr√¢n tr·ªçng em ‚Äî v√† c·∫£m ∆°n em ƒë√£ ƒë·ªçc t·ªõi ƒë√¢y.

    Y√™u em,
    (Ng∆∞·ªùi g·ª≠i)`.trim();

    // helper: open modal
    function openModal(text){
      modalText.textContent = text;
      modal.classList.add('open');
    }
    function closeModal(){
      modal.classList.remove('open');
    }

    openBtn.addEventListener('click', ()=>{
      openModal(fullLetter);
      pulseHeart();
    });

    decline.addEventListener('click', ()=>{
      closeModal();
      shake(heart);
      showToast('Kh√¥ng sao c·∫£ ‚Äî c·∫£m ∆°n em ƒë√£ nghe anh n√≥i.');
    });

    accept.addEventListener('click', ()=>{
      closeModal();
      launchConfetti();
      showToast('Anh vui l·∫Øm! C·∫£m ∆°n em üíñ');
    });

    yesBtn.addEventListener('click', ()=>{
      openModal('Em ch·ªçn: C√≥ ‚ù§Ô∏è\n\nAnh r·∫•t vui khi nghe ƒëi·ªÅu ƒë√≥ ‚Äî m√¨nh ƒëi u·ªëng n∆∞·ªõc nh√©? :)');
    });
    noBtn.addEventListener('click', ()=>{
      openModal('Em ch·ªçn: Kh√¥ng üí¨\n\nAnh hi·ªÉu. C·∫£m ∆°n em ƒë√£ th√†nh th·∫≠t. Anh v·∫´n c·∫ßu ch√∫c nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp ƒë·∫øn em.');
    });

    surpriseBtn.addEventListener('click', ()=>{
      launchConfetti(150);
      showToast('Qu√† ·∫£o ƒë√£ g·ª≠i ‚Äî hi v·ªçng em m·ªâm c∆∞·ªùi :)');
    });

    sendNote.addEventListener('click', ()=>{
      const v = noteInput.value.trim();
      if(!v){ showToast('H√£y vi·∫øt ƒëi·ªÅu g√¨ ƒë√≥ tr∆∞·ªõc khi g·ª≠i.'); return; }
      openModal('L·ªùi nh·∫Øn ƒë√£ g·ª≠i:\n\n"' + v + '"\n\nAnh ƒë√£ l∆∞u l·ªùi nh·∫Øn n√†y trong tim (v√† trong tr√¨nh duy·ªát c·ªßa b·∫°n).');
      // save to localStorage as a tiny demo
      try{ localStorage.setItem('love_note', v); }catch(e){}
    });

    // small UI effects
    function pulseHeart(){
      heart.style.transform = 'scale(1.2)';
      setTimeout(()=>heart.style.transform='scale(1)',400);
    }
    function shake(el){
      el.animate([{transform:'translateX(-6px)'},{transform:'translateX(6px)'} ,{transform:'translateX(0)'}], {duration:500,iterations:1});
    }

    // toast
    function showToast(t){
      const x = document.createElement('div');
      x.textContent = t; x.style.position='fixed';x.style.right='18px';x.style.bottom='18px';x.style.padding='10px 12px';x.style.borderRadius='10px';x.style.background='linear-gradient(90deg, rgba(255,107,129,0.12), rgba(255,209,102,0.08))';x.style.backdropFilter='blur(6px)';x.style.color='var(--text)';x.style.zIndex=9999;document.body.appendChild(x);
      setTimeout(()=>{x.style.opacity='0';x.style.transform='translateY(8px)';},2500);
      setTimeout(()=>x.remove(),3200);
    }

    // Confetti (simple)
    function launchConfetti(count=80){
      const ctx = confettiCanvas.getContext('2d');
      const w = confettiCanvas.width = confettiCanvas.offsetWidth;
      const h = confettiCanvas.height = confettiCanvas.offsetHeight;
      const pieces = [];
      for(let i=0;i<count;i++){
        pieces.push({x:Math.random()*w,y:Math.random()*-h,vy:2+Math.random()*4,ax:0.01*(Math.random()-0.5),size:6+Math.random()*8,rot:Math.random()*360,vr:Math.random()*6-3,color:randomColor()});
      }
      let frame=0;
      function render(){
        ctx.clearRect(0,0,w,h);
        for(const p of pieces){
          p.x += p.ax*frame;
          p.y += p.vy;
          p.rot += p.vr;
          ctx.save();
          ctx.translate(p.x,p.y);
          ctx.rotate(p.rot*Math.PI/180);
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size*0.6);
          ctx.restore();
          if(p.y>h+20){ p.y = -10; p.x = Math.random()*w; }
        }
        frame++;
        if(frame<500) requestAnimationFrame(render);
        else ctx.clearRect(0,0,w,h);
      }
      render();
    }
    function randomColor(){
      const cs = ['#ff6b81','#ffd166','#9bf6ff','#c4f0c9','#ff9f80']; return cs[Math.floor(Math.random()*cs.length)];
    }

    // resize confetti
    window.addEventListener('resize', ()=>{
      confettiCanvas.width = confettiCanvas.offsetWidth;
      confettiCanvas.height = confettiCanvas.offsetHeight;
    });

    // keyboard: Esc to close modal
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

    // load saved note
    try{ const saved = localStorage.getItem('love_note'); if(saved) noteInput.value = saved; }catch(e){}

  </script>
</body>
</html>
